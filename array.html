<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="main.css" />
    <meta name="description" content="Generate an array of 3D ArUco marker STL files for printing">
    <meta name="keywords"
        content="ArUco, AprilTag, OpenCV, april, tag, marker, array, grid, dictionary, family, print, stl, 3d printing, computer vision, robotics">
    <link rel="icon" type="image/png" href="favicon.png">
    <title>Online 3D ArUco Marker Array STL Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/exporters/STLExporter.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/utils/BufferGeometryUtils.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/exporters/GLTFExporter.js"></script>

</head>

<body>
    <h1>3D ArUco Marker Array STL Generator</h1>
    <form class="setup">
        <div class="field">
            <label for="frm-dict">Dictionary:</label>
            <select name="dict" id="frm-dict">
                <optgroup label="Standard dictionaries">
                    <option value="aruco" data-width="5" data-height="5" data-number="1024">Original ArUco</option>
                    <option selected value="4x4_1000" data-width="4" data-height="4">4x4 (50, 100, 250, 1000)</option>
                    <option value="5x5_1000" data-width="5" data-height="5">5x5 (50, 100, 250, 1000)</option>
                    <option value="6x6_1000" data-width="6" data-height="6">6x6 (50, 100, 250, 1000)</option>
                    <option value="7x7_1000" data-width="7" data-height="7">7x7 (50, 100, 250, 1000)</option>
                    <option value="mip_36h12" data-width="6" data-height="6" data-number="250">MIP_36h12 (250)</option>
                </optgroup>
                <optgroup label="AprilTag">
                    <option value="april_16h5" data-width="4" data-height="4" data-number="30">AprilTag 16h5 (30)
                    </option>
                    <option value="april_25h9" data-width="5" data-height="5" data-number="35">AprilTag 25h9 (35)
                    </option>
                    <option value="april_36h10" data-width="6" data-height="6" data-number="2320">AprilTag 36h10 (2320)
                    </option>
                    <option value="april_36h11" data-width="6" data-height="6" data-number="587">AprilTag 36h11 (587)
                    </option>
                </optgroup>
            </select>
        </div>
        <div class="field">
            <label for="frm-grid-x">Grid X:</label>
            <input id="frm-grid-x" name="gridX" type="number" min="1" max="20" value="3">
        </div>
        <div class="field">
            <label for="frm-grid-y">Grid Y:</label>
            <input id="frm-grid-y" name="gridY" type="number" min="1" max="20" value="3">
        </div>
        <div class="field">
            <label for="frm-gap">Gap Width (mm):</label>
            <input id="frm-gap" name="gap" type="number" min="0" step="0.1" value="5">
        </div>
        <div class="field">
            <label>Gap Fill Type:</label>
            <div class="radio-group">
                <input type="radio" id="frm-gap-empty" name="gapFill" value="empty" checked>
                <label for="frm-gap-empty" class="radio-label">Empty</label>
                <input type="radio" id="frm-gap-black" name="gapFill" value="black">
                <label for="frm-gap-black" class="radio-label">Fill Black</label>
                <input type="radio" id="frm-gap-white" name="gapFill" value="white">
                <label for="frm-gap-white" class="radio-label">Fill White</label>
            </div>
        </div>
         <div class="field">
            <label for="frm-start-id">Start ID for Refill:</label>
            <input id="frm-start-id" name="startId" type="number" min="0" value="0">
        </div>
        <div class="field">
            <label for="frm-ids">Marker IDs (comma-separated):</label>
            <textarea id="frm-ids" name="ids" rows="3">0,1,2,3,4,5,6,7,8</textarea>
        </div>
        <div class="field">
            <button type="button" id="btn-refill-ids">Refill IDs</button>
            <button type="button" id="btn-randomize-ids">Randomize IDs</button>
        </div>
        <div class="field">
            <label for="frm-dim">Marker dimension (mm):</label>
            <input id="frm-dim" name="dim" type="number" min="10" max="500" value="50">
        </div>
        <div class="field">
            <label for="frm-z1">Base height (z1) (mm):</label>
            <input id="frm-z1" name="z1" type="number" min="0" max="50" step="0.1" value="2">
        </div>
        <div class="field">
            <label for="frm-z2">Feature height (z2) (mm):</label>
            <input id="frm-z2" name="z2" type="number" min="0.1" max="50" step="0.1" value="1">
        </div>
        <div class="field">
            <label>Extrusion Type:</label>
            <div class="radio-group">
                <input type="radio" id="frm-positive" name="extrusion" value="positive" checked>
                <label for="frm-positive" class="radio-label">Positive</label>
                <input type="radio" id="frm-negative" name="extrusion" value="negative">
                <label for="frm-negative" class="radio-label">Negative</label>
                <input type="radio" id="frm-flat" name="extrusion" value="flat">
                <label for="frm-flat" class="radio-label">Flat</label>
            </div>
        </div>
    </form>

    <div class="marker-id"></div> <!-- This will display array info -->
    <div id="stl-preview-container">
        <div id="stl-preview"></div>
    </div>

    <div class="tools">
        <button type="button" id="save-stl-array-button" class="save-button">Save STL Array</button>
        <button type="button" id="save-glb-array-button" class="save-button">Save GLB Array</button>
        or <a href="javascript:window.print()">print page view</a>.
    </div>
    <footer>
        <div>
            If you like this project, please <a href="https://github.com/okalachev/arucogen">
                <nobr>â˜… original on GitHub</nobr>
            </a>! (Array version based on original)
        </div>
        <div>
            Original Author: <a href="http://chev.me">Oleg Kalachev</a>. (Adapted for STL and Array)
        </div>
    </footer>
    <script type="module" src="js/array_app.js"></script>
</body>

</html> 