<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="main.css" />
    <meta name="description" content="Generate 3D ArUco marker STL files for printing">
    <meta name="keywords"
        content="ArUco, AprilTag, OpenCV, april, tag, marker, dictionary, family, print, stl, 3d printing, computer vision, robotics">
    <link rel="icon" type="image/png" href="favicon.png">
    <title>Online 3D ArUco Marker STL Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/exporters/STLExporter.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/utils/BufferGeometryUtils.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/exporters/GLTFExporter.js"></script>

</head>

<body>
    <div class="main-content-wrapper">
        <form class="setup">
            <h1>3D ArUco Marker STL Generator</h1>
            <fieldset>
                <legend>Marker Definition</legend>
                <div class="field">
                    <label for="frm-dict">Dictionary:</label>
                    <select name="dict" id="frm-dict">
                        <optgroup label="Standard dictionaries">
                            <option value="aruco" data-width="5" data-height="5" data-number="1024">Original ArUco
                            </option>
                            <option selected value="4x4_1000" data-width="4" data-height="4">4x4 (50, 100, 250, 1000)
                            </option>
                            <option value="5x5_1000" data-width="5" data-height="5">5x5 (50, 100, 250, 1000)</option>
                            <option value="6x6_1000" data-width="6" data-height="6">6x6 (50, 100, 250, 1000)</option>
                            <option value="7x7_1000" data-width="7" data-height="7">7x7 (50, 100, 250, 1000)</option>
                            <option value="mip_36h12" data-width="6" data-height="6" data-number="250">MIP_36h12 (250)
                            </option>
                        </optgroup>
                        <optgroup label="AprilTag">
                            <option value="april_16h5" data-width="4" data-height="4" data-number="30">AprilTag 16h5
                                (30)
                            </option>
                            <option value="april_25h9" data-width="5" data-height="5" data-number="35">AprilTag 25h9
                                (35)
                            </option>
                            <option value="april_36h10" data-width="6" data-height="6" data-number="2320">AprilTag 36h10
                                (2320)
                            </option>
                            <option value="april_36h11" data-width="6" data-height="6" data-number="587">AprilTag 36h11
                                (587)
                            </option>
                        </optgroup>
                    </select>
                </div>
                <div class="field">
                    <label for="frm-id">Marker ID:</label>
                    <input id="frm-id" name="id" type="number" min="0" max="999" value="0">
                </div>
                <div class="field">
                    <label for="frm-dim">Marker dimension (mm):</label>
                    <input id="frm-dim" name="dim" type="number" min="10" max="500" value="50">
                </div>
            </fieldset>

            <fieldset>
                <legend>Marker Extrusion</legend>
                <div class="field">
                    <label for="frm-z1">Base height (z1) (mm):</label>
                    <input id="frm-z1" name="z1" type="number" min="0" max="50" step="0.1" value="2">
                </div>
                <div class="field">
                    <label for="frm-z2">Feature height (z2) (mm):</label>
                    <input id="frm-z2" name="z2" type="number" min="0.1" max="50" step="0.1" value="1">
                </div>
                <div class="field field-stacked">
                    <label>Extrusion Type:</label>
                    <div class="radio-group">
                        <input type="radio" id="frm-positive" name="extrusion" value="positive" checked>
                        <label for="frm-positive" class="radio-label">Positive</label>
                        <input type="radio" id="frm-negative" name="extrusion" value="negative">
                        <label for="frm-negative" class="radio-label">Negative</label>
                        <input type="radio" id="frm-flat" name="extrusion" value="flat">
                        <label for="frm-flat" class="radio-label">Flat</label>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Border Configuration</legend>
                <div class="field" id="border-width-field">
                    <label for="frm-border-width">Border Width (mm):</label>
                    <input id="frm-border-width" name="borderWidth" type="number" min="0" step="0.1" value="5">
                </div>
                <div class="field field-stacked" id="border-corner-field">
                    <label>Border Corner Color:</label>
                    <div class="radio-group">
                        <input type="radio" id="frm-corner-same" name="borderCornerType" value="same" checked>
                        <label for="frm-corner-same" class="radio-label">Same as Border</label>
                        <input type="radio" id="frm-corner-opposite" name="borderCornerType" value="opposite">
                        <label for="frm-corner-opposite" class="radio-label">Opposite to Border</label>
                    </div>
                </div>
            </fieldset>
        </form>

        <div class="preview-and-tools-wrapper">
            <div class="preview-header">
                <div class="marker-id"></div>
                <div class="tools">
                    <button type="button" id="save-white-stl-button" class="save-button">Save White STL</button>
                    <button type="button" id="save-black-stl-button" class="save-button">Save Black STL</button>
                    <button type="button" id="save-glb-button" class="save-button">Save Colored GLB</button>
                </div>
            </div>
            <div id="stl-preview-container">
                <div id="stl-preview"></div>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>

</html>